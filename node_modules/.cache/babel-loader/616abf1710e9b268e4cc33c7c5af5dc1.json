{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport './CrudCurso.css';\nimport { useState, useEffect } from \"react\";\nimport Main from \"../template/Main\";\nimport axios from \"axios\";\nconst urlAPI = 'http://localhost:5014/api/curso';\nconst title = 'Cadastro de Cursos';\nconst initialState = {\n  curso: {\n    id: 0,\n    codCurso: 0,\n    nomeCurso: '',\n    periodo: ''\n  },\n  lista: []\n};\nexport default function Curso() {\n  _s();\n\n  const [curso, setCurso] = useState(initialState.curso);\n  const [lista, setLista] = useState(initialState.lista);\n\n  const dadosAPI = async () => {\n    await axios(urlAPI).then(resp => resp.data).catch(err => err);\n  };\n\n  useEffect(() => {\n    dadosAPI().then(setLista);\n  }, [curso]);\n\n  const limpar = () => {\n    setCurso({\n      curso: initialState.curso\n    });\n  };\n\n  const salvar = () => {\n    curso.codCurso = Number(curso.codCurso);\n    const metodo = curso.id ? 'put' : 'post';\n    const url = curso.id ? `${urlAPI}/${curso.id}` : urlAPI;\n    axios[metodo](url, curso).then(resp => {\n      const lista = getListaAtualizada(resp.data);\n      setCurso({\n        curso: initialState.curso,\n        lista\n      });\n    });\n  };\n\n  const getListaAtualizada = function (curso) {\n    let add = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    const listaAtualizada = lista.filter(a => a.id !== curso.id);\n    if (add) listaAtualizada.unshift(curso);\n    return listaAtualizada;\n  };\n\n  const atualizaCampo = evento => {\n    const {\n      nome,\n      valor\n    } = evento.target;\n    setCurso({ ...curso,\n      [nome]: valor\n    });\n  };\n\n  const carregar = curso => {\n    setCurso(curso);\n  };\n\n  const remover = curso => {\n    const url = urlAPI + \"/\" + curso.id;\n\n    if (window.confirm(\"Confirma remoção do aluno: \" + curso.nomeCurso)) {\n      console.log(\"entrou no confirme da tela\");\n      axios['delete'](url, curso).then(resp => {\n        const lista = getListaAtualizada(curso, false);\n        setCurso({\n          curso: initialState.curso,\n          lista\n        });\n      });\n    }\n  };\n}\n\n_s(Curso, \"ZOr7Kokcjht3IgayDTH0zQD/F5E=\");\n\n_c = Curso;\n\nvar _c;\n\n$RefreshReg$(_c, \"Curso\");","map":{"version":3,"names":["React","useState","useEffect","Main","axios","urlAPI","title","initialState","curso","id","codCurso","nomeCurso","periodo","lista","Curso","setCurso","setLista","dadosAPI","then","resp","data","catch","err","limpar","salvar","Number","metodo","url","getListaAtualizada","add","listaAtualizada","filter","a","unshift","atualizaCampo","evento","nome","valor","target","carregar","remover","window","confirm","console","log"],"sources":["/Users/u21426/escola/src/components/CrudCurso/CrudCurso.js"],"sourcesContent":["import React from \"react\";\nimport './CrudCurso.css'\nimport { useState, useEffect } from \"react\";\nimport Main from \"../template/Main\";\nimport axios from \"axios\";\n\nconst urlAPI = 'http://localhost:5014/api/curso'\nconst title = 'Cadastro de Cursos'\nconst initialState = {\n    curso: {id: 0, codCurso: 0, nomeCurso: '', periodo: ''},\n    lista: []\n}\n\nexport default function Curso() {\n    const [curso, setCurso] = useState(initialState.curso)\n    const [lista, setLista] = useState(initialState.lista)\n\n    const dadosAPI = async () => {\n        await axios(urlAPI).then((resp) => resp.data).catch((err) => err)\n    }\n\n    useEffect(() => {\n        dadosAPI()\n            .then(setLista)\n    }, [curso])\n\n    const limpar = () => {\n        setCurso({ curso: initialState.curso })\n    }\n\n    const salvar = () => {\n        curso.codCurso = Number(curso.codCurso)\n        const metodo = curso.id ? 'put' : 'post'\n        const url = curso.id ? `${urlAPI}/${curso.id}` : urlAPI\n\n        axios[metodo] (url, curso)\n            .then((resp) => {\n                const lista = getListaAtualizada(resp.data)\n                setCurso({ curso: initialState.curso, lista})\n            })\n    }\n\n    const getListaAtualizada = (curso, add = true) => {\n        const listaAtualizada = lista.filter(a => a.id !== curso.id);\n        if(add) listaAtualizada.unshift(curso);\n        return listaAtualizada;\n    }\n\n    const atualizaCampo = (evento) => {\n        const {nome, valor} = evento.target\n        setCurso({\n            ...curso,\n            [nome] : valor\n        })\n    }\n\n    const carregar = (curso) => {\n        setCurso(curso)\n    }\n\n    const remover = (curso) => {\n        const url = urlAPI + \"/\" + curso.id;\n        if (window.confirm(\"Confirma remoção do aluno: \" + curso.nomeCurso)) {\n            console.log(\"entrou no confirme da tela\")\n        \n        axios['delete'] (url, curso)\n            .then((resp) => {\n                const lista = getListaAtualizada(curso, false)\n                setCurso({ curso: initialState.curso, lista })\n            })\n    }\n\n    \n}}"],"mappings":"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"},"metadata":{},"sourceType":"module"}