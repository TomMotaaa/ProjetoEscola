{"ast":null,"code":"var _jsxFileName = \"/Users/u21426/escola/src/components/Carometro/carometro.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport './carometro.css';\nimport { useState, useEffect } from \"react\";\nimport Main from \"../template/Main\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Carometro() {\n  _s();\n\n  const title = 'Carômetro';\n  const urlAPIAlunos = 'http://localhost:5014/api/aluno';\n  const urlAPICursos = 'http://localhost:5014/api/curso';\n  const infos = {\n    cursos: {\n      id: 0,\n      codCurso: '',\n      nomeCurso: '',\n      periodo: ''\n    },\n    listaAlunos: [],\n    listaCursos: []\n  };\n\n  const geradorDeLetras = () => {\n    return Math.random().toString(36).substring(2, 9);\n  };\n\n  const [listaAlunos, setListaAlunos] = useState(infos.listaAlunos);\n  const [listaCursos, setListaCursos] = useState(infos.listaCursos);\n  const [cursos, setCursos] = useState(infos.cursos);\n  useEffect(() => {\n    axios(urlAPICursos).then(resp => setListaCursos(resp.data));\n  }, []);\n\n  const getAlunosCadastrados = async codCurso => {\n    return await axios(urlAPIAlunos).then(resp => {\n      const listaAlunos = resp.data;\n      return listaAlunos.filter(alunos => alunos.codCurso === codCurso);\n    });\n  };\n\n  const atualizarAlunos = async evento => {\n    const codCurso = evento.target.value;\n\n    if (evento.target.value === '') {\n      setListaAlunos(infos.listaAlunos);\n      setCursos(infos.cursos);\n      return;\n    }\n\n    cursos.codCurso = Number(codCurso);\n    const listaAlunos = await getAlunosCadastrados(cursos.codCurso);\n    if (!Array.isArray(listaAlunos)) return;\n    setListaAlunos(listaAlunos);\n    setCursos(cursos);\n  };\n\n  const renderSelect = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"select-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \" Curso: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"selectCarometro\",\n        value: cursos.codCurso,\n        onChange: e => {\n          atualizarAlunos(e);\n        },\n        required: true,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          disabled: true,\n          value: \"\",\n          children: \"  -- Escolha um curso -- \"\n        }, \"\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this), listaCursos.map(curso => /*#__PURE__*/_jsxDEV(\"option\", {\n          name: \"codCurso\",\n          value: curso.codCurso,\n          children: [curso.codCurso, \" - \", curso.nomeCurso, \" : \", curso.periodo]\n        }, curso.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 29\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this);\n  };\n\n  const renderCards = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card-row\",\n    children: Array.isArray(listaAlunos) && listaAlunos.length > 0 ? listaAlunos.map(aluno => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card draw-border\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"card__image\",\n        src: `https://avatars.dicebear.com/api/big-smile/${geradorDeLetras()}.svg`,\n        alt: `Avatar de ` + aluno.nome\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"card-title\",\n        children: aluno.nome\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"card-description\",\n        children: [\"RA: \", aluno.ra, \" | Curso: \", aluno.codCurso]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this)]\n    }, aluno.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }, this)) : null\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container carometro\",\n    children: /*#__PURE__*/_jsxDEV(Main, {\n      title: title,\n      children: [renderSelect(), /*#__PURE__*/_jsxDEV(\"main\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-container\",\n          children: renderCards\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Carometro, \"BOKy7vKqstDX8Hw3i2jRjew/HNM=\");\n\n_c = Carometro;\n\nvar _c;\n\n$RefreshReg$(_c, \"Carometro\");","map":{"version":3,"names":["React","useState","useEffect","Main","axios","Carometro","title","urlAPIAlunos","urlAPICursos","infos","cursos","id","codCurso","nomeCurso","periodo","listaAlunos","listaCursos","geradorDeLetras","Math","random","toString","substring","setListaAlunos","setListaCursos","setCursos","then","resp","data","getAlunosCadastrados","filter","alunos","atualizarAlunos","evento","target","value","Number","Array","isArray","renderSelect","e","map","curso","renderCards","length","aluno","nome","ra"],"sources":["/Users/u21426/escola/src/components/Carometro/carometro.js"],"sourcesContent":["import React from \"react\";\nimport './carometro.css'\nimport { useState, useEffect } from \"react\";\nimport Main from \"../template/Main\";\nimport axios from \"axios\";\n\nexport default function Carometro() {\n\n    const title = 'Carômetro'\n    const urlAPIAlunos = 'http://localhost:5014/api/aluno';\n    const urlAPICursos = 'http://localhost:5014/api/curso';\n    const infos = {\n        cursos: { id: 0, codCurso: '', nomeCurso: '', periodo: ''},\n        listaAlunos: [],\n        listaCursos: []\n    }\n\n    const geradorDeLetras = () => {\n        return Math.random().toString(36).substring(2, 9);\n    }\n\n    const [listaAlunos, setListaAlunos] = useState(infos.listaAlunos)\n    const [listaCursos, setListaCursos] = useState(infos.listaCursos)\n    const [cursos, setCursos] = useState(infos.cursos)\n\n    useEffect( () => {\n        axios(urlAPICursos)\n            .then((resp) => setListaCursos(resp.data))\n    }, []);\n\n    const getAlunosCadastrados = async (codCurso) => {\n        return await axios(urlAPIAlunos)\n                        .then((resp) => {\n                            const listaAlunos = resp.data\n                            return listaAlunos.filter(\n                                (alunos) => alunos.codCurso === codCurso\n                            )\n                        })\n    }\n\n    const atualizarAlunos = async (evento) => {\n        const codCurso = evento.target.value;\n        if (evento.target.value === '') {\n            setListaAlunos(infos.listaAlunos)\n            setCursos(infos.cursos)\n            return\n        }\n        cursos.codCurso = Number(codCurso)\n        const listaAlunos = await getAlunosCadastrados(cursos.codCurso)\n        if (!Array.isArray(listaAlunos)) return;\n\n        setListaAlunos(listaAlunos)\n        setCursos(cursos)\n    }\n\n    const renderSelect = () => {\n        return (\n            <div className=\"select-container\">\n                <label> Curso: </label>\n                <select className=\"selectCarometro\" value={cursos.codCurso}  onChange={e => { atualizarAlunos(e)}} required>\n                    <option disabled={true} key=\"\" value=\"\">  -- Escolha um curso -- </option>\n                    {listaCursos.map( (curso) =>\n                            <option  key={curso.id} name=\"codCurso\" value={curso.codCurso}>\n                                { curso.codCurso } - { curso.nomeCurso } : { curso.periodo }\n                            </option>\n                    )}\n                </select>\n            </div>\n        );\n    };\n\n    const renderCards = () =>(\n        <div className=\"card-row\">\n            {Array.isArray(listaAlunos) && listaAlunos.length > 0 ?\n            listaAlunos.map((aluno) => (\n                <div key={aluno.id} className=\"card draw-border\">\n                    <img  className=\"card__image\" src={`https://avatars.dicebear.com/api/big-smile/${geradorDeLetras()}.svg`} alt={`Avatar de `+ aluno.nome}/>\n                    <span className=\"card-title\">{aluno.nome}</span>\n                    <span className=\"card-description\">RA: {aluno.ra} | Curso: {aluno.codCurso}</span>\n                </div>\n            )) : null}\n        </div>\n    )\n\n    return (\n        <div className=\"container carometro\">\n            <Main title={title}>\n                {renderSelect()}\n                <main>\n                    <div className=\"card-container\">\n                        {renderCards}\n                    </div>\n                </main>\n            </Main>\n        </div>\n    )\n    \n}"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,iBAAP;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,eAAe,SAASC,SAAT,GAAqB;EAAA;;EAEhC,MAAMC,KAAK,GAAG,WAAd;EACA,MAAMC,YAAY,GAAG,iCAArB;EACA,MAAMC,YAAY,GAAG,iCAArB;EACA,MAAMC,KAAK,GAAG;IACVC,MAAM,EAAE;MAAEC,EAAE,EAAE,CAAN;MAASC,QAAQ,EAAE,EAAnB;MAAuBC,SAAS,EAAE,EAAlC;MAAsCC,OAAO,EAAE;IAA/C,CADE;IAEVC,WAAW,EAAE,EAFH;IAGVC,WAAW,EAAE;EAHH,CAAd;;EAMA,MAAMC,eAAe,GAAG,MAAM;IAC1B,OAAOC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,SAA3B,CAAqC,CAArC,EAAwC,CAAxC,CAAP;EACH,CAFD;;EAIA,MAAM,CAACN,WAAD,EAAcO,cAAd,IAAgCrB,QAAQ,CAACQ,KAAK,CAACM,WAAP,CAA9C;EACA,MAAM,CAACC,WAAD,EAAcO,cAAd,IAAgCtB,QAAQ,CAACQ,KAAK,CAACO,WAAP,CAA9C;EACA,MAAM,CAACN,MAAD,EAASc,SAAT,IAAsBvB,QAAQ,CAACQ,KAAK,CAACC,MAAP,CAApC;EAEAR,SAAS,CAAE,MAAM;IACbE,KAAK,CAACI,YAAD,CAAL,CACKiB,IADL,CACWC,IAAD,IAAUH,cAAc,CAACG,IAAI,CAACC,IAAN,CADlC;EAEH,CAHQ,EAGN,EAHM,CAAT;;EAKA,MAAMC,oBAAoB,GAAG,MAAOhB,QAAP,IAAoB;IAC7C,OAAO,MAAMR,KAAK,CAACG,YAAD,CAAL,CACIkB,IADJ,CACUC,IAAD,IAAU;MACZ,MAAMX,WAAW,GAAGW,IAAI,CAACC,IAAzB;MACA,OAAOZ,WAAW,CAACc,MAAZ,CACFC,MAAD,IAAYA,MAAM,CAAClB,QAAP,KAAoBA,QAD7B,CAAP;IAGH,CANJ,CAAb;EAOH,CARD;;EAUA,MAAMmB,eAAe,GAAG,MAAOC,MAAP,IAAkB;IACtC,MAAMpB,QAAQ,GAAGoB,MAAM,CAACC,MAAP,CAAcC,KAA/B;;IACA,IAAIF,MAAM,CAACC,MAAP,CAAcC,KAAd,KAAwB,EAA5B,EAAgC;MAC5BZ,cAAc,CAACb,KAAK,CAACM,WAAP,CAAd;MACAS,SAAS,CAACf,KAAK,CAACC,MAAP,CAAT;MACA;IACH;;IACDA,MAAM,CAACE,QAAP,GAAkBuB,MAAM,CAACvB,QAAD,CAAxB;IACA,MAAMG,WAAW,GAAG,MAAMa,oBAAoB,CAAClB,MAAM,CAACE,QAAR,CAA9C;IACA,IAAI,CAACwB,KAAK,CAACC,OAAN,CAActB,WAAd,CAAL,EAAiC;IAEjCO,cAAc,CAACP,WAAD,CAAd;IACAS,SAAS,CAACd,MAAD,CAAT;EACH,CAbD;;EAeA,MAAM4B,YAAY,GAAG,MAAM;IACvB,oBACI;MAAK,SAAS,EAAC,kBAAf;MAAA,wBACI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAQ,SAAS,EAAC,iBAAlB;QAAoC,KAAK,EAAE5B,MAAM,CAACE,QAAlD;QAA6D,QAAQ,EAAE2B,CAAC,IAAI;UAAER,eAAe,CAACQ,CAAD,CAAf;QAAmB,CAAjG;QAAmG,QAAQ,MAA3G;QAAA,wBACI;UAAQ,QAAQ,EAAE,IAAlB;UAA+B,KAAK,EAAC,EAArC;UAAA;QAAA,GAA4B,EAA5B;UAAA;UAAA;UAAA;QAAA,QADJ,EAEKvB,WAAW,CAACwB,GAAZ,CAAkBC,KAAD,iBACV;UAAwB,IAAI,EAAC,UAA7B;UAAwC,KAAK,EAAEA,KAAK,CAAC7B,QAArD;UAAA,WACM6B,KAAK,CAAC7B,QADZ,SAC2B6B,KAAK,CAAC5B,SADjC,SACiD4B,KAAK,CAAC3B,OADvD;QAAA,GAAc2B,KAAK,CAAC9B,EAApB;UAAA;UAAA;UAAA;QAAA,QADP,CAFL;MAAA;QAAA;QAAA;QAAA;MAAA,QAFJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ;EAaH,CAdD;;EAgBA,MAAM+B,WAAW,GAAG,mBAChB;IAAK,SAAS,EAAC,UAAf;IAAA,UACKN,KAAK,CAACC,OAAN,CAActB,WAAd,KAA8BA,WAAW,CAAC4B,MAAZ,GAAqB,CAAnD,GACD5B,WAAW,CAACyB,GAAZ,CAAiBI,KAAD,iBACZ;MAAoB,SAAS,EAAC,kBAA9B;MAAA,wBACI;QAAM,SAAS,EAAC,aAAhB;QAA8B,GAAG,EAAG,8CAA6C3B,eAAe,EAAG,MAAnG;QAA0G,GAAG,EAAG,YAAD,GAAc2B,KAAK,CAACC;MAAnI;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI;QAAM,SAAS,EAAC,YAAhB;QAAA,UAA8BD,KAAK,CAACC;MAApC;QAAA;QAAA;QAAA;MAAA,QAFJ,eAGI;QAAM,SAAS,EAAC,kBAAhB;QAAA,mBAAwCD,KAAK,CAACE,EAA9C,gBAA4DF,KAAK,CAAChC,QAAlE;MAAA;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA,GAAUgC,KAAK,CAACjC,EAAhB;MAAA;MAAA;MAAA;IAAA,QADJ,CADC,GAOI;EART;IAAA;IAAA;IAAA;EAAA,QADJ;;EAaA,oBACI;IAAK,SAAS,EAAC,qBAAf;IAAA,uBACI,QAAC,IAAD;MAAM,KAAK,EAAEL,KAAb;MAAA,WACKgC,YAAY,EADjB,eAEI;QAAA,uBACI;UAAK,SAAS,EAAC,gBAAf;UAAA,UACKI;QADL;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,QAFJ;IAAA;MAAA;MAAA;MAAA;IAAA;EADJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAaH;;GA3FuBrC,S;;KAAAA,S"},"metadata":{},"sourceType":"module"}